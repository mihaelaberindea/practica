cmake_minimum_required(VERSION 3.1.0)

project(practica)

### Local Variables ###

set(SOURCES
    Main.cpp
)

set(HEADERS 
    include/vector/Vector.h
    include/list/List.h
)

set(INCLUDE_DIRECTORIES
    PUBLIC include/vector
    PUBLIC include/list
)

### Main Target ###

add_executable(${PROJECT_NAME} ${SOURCES})
target_include_directories(${PROJECT_NAME} ${INCLUDE_DIRECTORIES})


### Test Targets ###

add_executable(vector_test_target TestVector.cpp)
target_include_directories(vector_test_target ${INCLUDE_DIRECTORIES})

add_test(vector_unit_test vector_test_target)

enable_testing()


### Custom Targets ###

add_custom_target(format
    COMMAND "cd" ${CMAKE_CURRENT_SOURCE_DIR} "&&" "clang-format" "-style=file" "-i" ${SOURCES} ${HEADERS}
)

add_custom_target(run_tests
    COMMAND "cd" ${CMAKE_CURRENT_SOURCE_DIR}/build "&&" "make" "test"
)